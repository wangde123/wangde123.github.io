"use strict";
import { createClient } from "@supabase/supabase-js";
const sanitize = (v) => (v ?? "").replace(/^['"]|['"]$/g, "").trim();
const urlFromDefine = typeof SUPABASE_URL !== "undefined" ? SUPABASE_URL : void 0;
const keyFromDefine = typeof SUPABASE_ANON_KEY !== "undefined" ? SUPABASE_ANON_KEY : void 0;
const rawUrl = urlFromDefine ?? process.env.SUPABASE_URL;
const rawKey = keyFromDefine ?? process.env.SUPABASE_ANON_KEY;
const supabaseUrl = sanitize(rawUrl);
const supabaseAnonKey = sanitize(rawKey);
if (typeof window !== "undefined") {
  console.debug("[Supabase] url(raw->sanitized):", rawUrl, "->", supabaseUrl);
  console.debug("[Supabase] key(prefix):", (supabaseAnonKey || "").slice(0, 6));
}
if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error("Missing Supabase environment variables. Please set SUPABASE_URL and SUPABASE_ANON_KEY.");
}
if (!/^https?:\/\//.test(supabaseUrl)) {
  throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");
}
export const supabase = createClient(supabaseUrl, supabaseAnonKey);
