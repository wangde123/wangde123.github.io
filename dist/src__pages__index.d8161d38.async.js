"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{68494:function(D,j,t){t.r(j),t.d(j,{default:function(){return J}});var z=t(90228),M=t.n(z),A=t(48305),x=t.n(A),E=t(87999),O=t.n(E),s=t(75271),v=t(25880);function k(l){return s.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},l,{style:Object.assign({verticalAlign:"-0.125em"},l.style),className:["antd-mobile-icon",l.className].filter(Boolean).join(" ")}),s.createElement("g",{id:"AddCircleOutline-AddCircleOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"AddCircleOutline-\u7F16\u7EC4"},s.createElement("rect",{id:"AddCircleOutline-\u77E9\u5F62",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),s.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M25.5,14.9 L25.5,22.5 L25.5,22.5 L33.1,22.5 C33.3209139,22.5 33.5,22.6790861 33.5,22.9 L33.5,25.1 C33.5,25.3209139 33.3209139,25.5 33.1,25.5 L25.5,25.5 L25.5,25.5 L25.5,33.1 C25.5,33.3209139 25.3209139,33.5 25.1,33.5 L22.9,33.5 C22.6790861,33.5 22.5,33.3209139 22.5,33.1 L22.5,25.5 L22.5,25.5 L14.9,25.5 C14.6790861,25.5 14.5,25.3209139 14.5,25.1 L14.5,22.9 C14.5,22.6790861 14.6790861,22.5 14.9,22.5 L22.5,22.5 L22.5,22.5 L22.5,14.9 C22.5,14.6790861 22.6790861,14.5 22.9,14.5 L25.1,14.5 C25.3209139,14.5 25.5,14.6790861 25.5,14.9 Z",id:"AddCircleOutline-\u5F62\u72B6",fill:"currentColor",fillRule:"nonzero"}))))}var B=k,R=t(5321),f={homeContainer:"homeContainer___lgVWX",swiper:"swiper___SDveD",slideContent:"slideContent___k3147",slideImage:"slideImage___lzxyp",skeleton:"skeleton___qvSzN",shimmer:"shimmer___yqb4P",welcomeSection:"welcomeSection___qFMq9",welcomeTitle:"welcomeTitle___hvNYh",description:"description___g31NP",uploaderContainer:"uploaderContainer___dCsm3",out_line:"out_line___PLyoK"},T=t(11711),o=t(52676),S=(0,R.eI)("https://tuiwsyyxhzhjonchrtps.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1aXdzeXl4aHpoam9uY2hydHBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3NDc3NjQsImV4cCI6MjA4MDMyMzc2NH0.6izd1nRzDu3FUc7Yx08W_-MN05l21uVy1sbe13Np3kA"),F="photos";function P(l){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function l(a){var y,I,d,h,g,c,C,n,u,m,p,r=arguments;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y=r.length>1&&r[1]!==void 0?r[1]:1280,I=r.length>2&&r[2]!==void 0?r[2]:.8,a.type.startsWith("image/")){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,createImageBitmap(a);case 6:if(d=e.sent,h=d.width,g=d.height,c=Math.min(1,y/Math.max(h,g)),C=Math.max(1,Math.round(h*c)),n=Math.max(1,Math.round(g*c)),u=document.createElement("canvas"),u.width=C,u.height=n,m=u.getContext("2d"),m){e.next=17;break}return e.abrupt("return",a);case 17:return m.drawImage(d,0,0,C,n),p=a.type.includes("png")?"image/png":"image/jpeg",e.abrupt("return",new Promise(function(b){u.toBlob(function(i){return b(i||a)},p,I)}));case 20:case"end":return e.stop()}},l)})),N.apply(this,arguments)}function J(){var l=(0,s.useState)([]),a=x()(l,2),y=a[0],I=a[1],d=(0,s.useState)(!1),h=x()(d,2),g=h[0],c=h[1],C=function(){var n=O()(M()().mark(function u(){var m,p,r,w,e;return M()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c(!0),m="uploads",i.next=4,S.storage.from(F).list(m,{limit:20,offset:0,sortBy:{column:"name",order:"desc"}});case 4:if(p=i.sent,r=p.data,w=p.error,!w){i.next=12;break}return c(!1),console.error("[Supabase list error]",w.message),v.FN.show({content:"\u83B7\u53D6\u56FE\u7247\u5217\u8868\u5931\u8D25",duration:2e3,icon:"fail"}),i.abrupt("return");case 12:e=(r||[]).filter(function(L){return L.name}).map(function(L,X){return{image:S.storage.from(F).getPublicUrl("".concat(m,"/").concat(L.name)).data.publicUrl,id:X,title:L.name}}),I(e),c(!1),console.log("[Supabase photos]",e);case 16:case"end":return i.stop()}},u)}));return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)(function(){C()},[]),(0,o.jsxs)("div",{className:f.homeContainer,children:[(0,o.jsx)(B,{className:f.out_line,fontSize:25,onClick:function(){return T.m8.push("/edit")}}),g&&(0,o.jsx)("div",{className:f.skeleton}),!g&&(0,o.jsx)(v.tq,{autoplay:!0,loop:!0,autoplayInterval:3e3,children:y.map(function(n){return(0,o.jsx)(v.tq.Item,{children:(0,o.jsx)("div",{className:f.swiperItem,children:(0,o.jsx)(v.Ee,{src:n.image,alt:n.title,className:f.swiperImage})})},n.id)})})]})}}}]);
